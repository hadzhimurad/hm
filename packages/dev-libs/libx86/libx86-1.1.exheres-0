
require eutils

DESCRIPTION="A hardware-independent library for executing real-mode x86 code"
HOMEPAGE="http://www.codon.org.uk/~mjg59/libx86"
DOWNLOADS="http://www.codon.org.uk/~mjg59/${PN}/downloads/${PNV}.tar.gz"

LICENCES="BSD"
SLOT="0"
PLATFORMS="~amd64 ~x86"

MYOPTIONS="platform:amd64"

DEFAULT_SRC_PREPARE_PATCHES=( "${FILES}/${PN}-0.99-ifmask.patch" )

src_compile() {
	if option platform:amd64 ; then
		emake BACKEND="x86emu"
	fi
	emake
}

src_install() {
	emake LIBDIR="/usr/$(get_libdir)" DESTDIR="${IMAGE}" install || die
}
